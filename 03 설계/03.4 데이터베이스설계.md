## 03.4 데이터베이스 설계
### 03.4.1 데이터베이스 설계란?

데이터베이스 설계는 데이터베이스 시스템을 구축하는 과정 중 가장 중요한 부분 중 하나입니다. 이 단계에서는 데이터의 구조, 관계 및 저장 방법을 결정하여 시스템이 요구 사항을 충족하고 효율적으로 작동할 수 있도록 합니다.

먼저 데이터베이스 설계를 할 때, 고려해야 할 사항은 데이터베이스의 목적과 사용자 요구사항입니다. 더불어 어떤 종류의 데이터가 저장되어야 하며, 이 데이터는 어떻게 사용되고 관리되어야 하는지를 명확히 이해해야 합니다. 이를 토대로 데이터 모델을 설계하게 되는데, 그 과정에서 UML(unified modeling language)를 많이 사용합니다.

데이터 베이스 설계의 과정을 도식화하면 아래와 같습니다.

![image](https://ibb.co/YpSdV0f)

이를 각 단계 별로 설명하면 아래와 같습니다.
 
첫번째, 요구 분석 단계는 데이터베이스가 어떤 목적을 위해 사용되는지를 이해하고, 사용자 및 시스템 요구 사항을 수집하고 분석하는 단계입니다. 이를 통해 데이터베이스가 필요로 하는 정보의 종류 및 기능을 파악합니다. 주요 활동으로는 사용자 인터뷰, 문서 검토, 시스템 분석 등이 있습니다. 이 과정에서는 필요한 데이터의 종류, 저장 방법, 접근 권한 여부, 보안 등에 대한 요구 사항들을 문서화해야 합니다.  

두번째, 개념적 설계는 데이터베이스의 전체적인 구조를 설계하는 단계로, 사용자의 관점에서 데이터를 모델링합니다. 개념적 설계에서는 데이터베이스의 주요 개체(Entity), 관계(Relationship)를 정의하고 이를 개념적 모델(Entity-Relationship Diagram, ERD)로 표현합니다. ERD를 통해 데이터베이스의 논리적 구조를 미리 파악할 수 있습니다. 즉, 요구 분석 단계에서 나온 결과물들을 DBMS에 독립적인 E-R 다이어그램(줄여서 'ERD')으로 작성합니다.  

세번째, 논리적 설계 단계에서는 개념적 설계에서 정의한 개념적 모델을 논리적 모델로 변환합니다. 이 과정에서는 데이터의 구조와 관계를 보다 상세하게 정의하고, 그 일환으로 개체 별 속성(Attribute)을 지정합니다. 더불어 정규화(Normalization)를 통해 데이터 중복을 최소화하는 과정을 거칩니다.  

네번째, 물리적 설계는 논리적 설계에서 생성된 논리적 모델을 실제 데이터베이스 관리 시스템(DBMS)이 처리할 수 있는 물리적 구조로 변환하는 단계입니다. 이 단계에서는 저장 공간 할당, 인덱스 생성, 접근 경로 설계 등과 같은 세부 사항을 고려합니다. 또한 해당 단계에서는 각 속성 별 데이터 타입 및 글자 수 등의 속성을 구체적으로 지정합니다.더불어 성능 향상을 위해 데이터베이스의 파티셔닝, 클러스터링 등을 고려할 수 있습니다.  

2~4번 단계에 대한 이해를 돕기 위해 아래와 같은 도식도를 첨부했습니다. 해당 그림에서 빨간색 표시 부분이 개념적 설계 부분이며, 노란색 부분이 논리적 설계, 하늘색 부분이 물리적 설계를 나타낸다고 보면 됩니다.

2~4번 단계에 대한 이해를 돕기 위해 아래와 같은 도식도를 첨부했습니다.

![image](https://ibb.co/gjKmqp5)

해당 그림에서 빨간색 표시 부분이 개념적 설계 부분이며, 노란색 부분이 논리적 설계, 하늘색 부분이 물리적 설계를 나타낸다고 보면 됩니다.

구현 단계는 물리적 설계에서 정의된 데이터베이스 스키마를 기반으로 실제 데이터베이스를 생성하고 구축하는 단계입니다. 이 과정에서는 데이터베이스 테이블을 생성하고, 제약 조건을 설정하며, 데이터를 적재하고 인덱스를 생성합니다. 또한 보안 정책을 적용하고 백업 및 복구 전략을 수립하는 등의 작업이 이루어집니다. 

이렇듯 데이터베이스 설계를 효과적으로 수행하기 위해서는 데이터베이스 관련 이론(SQL, UML, DB 테이블 등)과 기술에 대한 깊은 이해와 함께 프론트 개발자-디자이너 등 내부 인력과의 원활한 커뮤니케이션이 필요합니다. 또한 변화하는 요구사항에 대응하기 위해 사용자의 입장에 서서 유연하고 확장 가능한 설계를 고려하는 것이 중요합니다.

### 03.4.2 데이터베이스 설계의 중요성

데이터베이스 설계는 정보 시스템의 핵심 요소 중 하나로, 데이터베이스의 효율성, 유연성, 안정성을 보장하는 데 중요한 역할을 합니다. 즉, 데이터베이스 설계는 효율적이고 안정적인 시스템 운영을 보장하는 데 필수적입니다.
이를 정리하면 아래와 같습니다.

첫 번째, 데이터베이스 설계는 데이터를 체계적으로 구조화하여 저장하고 관리하는 것으로 효율적인 데이터 관리를 목표로 합니다. 올바르게 설계된 데이터베이스는 데이터의 중복을 최소화하고 일관성을 유지하며, 효율적으로 데이터를 검색하고 조작할 수 있도록 합니다.

두 번째, 데이터베이스 설계는 데이터 일관성을 유지하는 데 중요한 역할을 합니다. 일관성 있는 데이터는 다양한 응용 프로그램 및 사용자들이 항상 정확하고 신뢰할 수 있는 정보에 접근할 수 있도록 합니다.

세 번째, 적절한 데이터베이스 설계는 데이터베이스의 성능을 향상시키는 데 도움을 줍니다. 효율적인 쿼리 실행, 인덱싱, 적절한 데이터 타입 및 구조 등을 고려하여 데이터베이스의 처리 속도와 응답 시간을 최적화할 수 있습니다.

네 번째, 올바른 데이터베이스 설계는 비용을 절감할 수 있는데, 중복 데이터를 최소화하고 효율적인 쿼리 실행을 통해 시스템 자원을 효율적으로 활용할 수 있습니다. 또한 잘 설계된 데이터베이스는 유지보수 비용을 줄이고 시스템의 생애 주기 비용을 최적화할 수 있습니다.

이렇듯 데이터베이스 설계는 데이터를 구조화하고 관리하기 위한 체계적이고 효율적인 방법을 결정하는 과정으로, 데이터베이스 시스템의 기반이 됩니다.

### 03.4.3 데이터베이스 설계 시 고려사항

데이터배이스 설계 시 고려사항으로 정규화가 있습니다. 정규화란 데이터베이스의 중복을 제거하여 무결성을 유지하고 효율적으로 관리하기 위해 정보를 분리하여 저장하는 것으로 정규화 단계에 따라 1NF > 2NF > 3NF > BCNF > 4NF > 5NF 정규화로 나뉩니다.일반적으로 실무에서 BCNF 단계 이상은 진행하지 않습니다. 정규화를 진행하면서 연산이 늘어나 응답시간이 느려지기 때문이죠. 그 때문에 실무에서 적절한 중복을 허용하면서 적절한 응답시간을 가지게 됩니다.

정규화의 장점으로 데이터베이스에서 발생하는 이상 현상(Anomaly) 발생빈도를 줄일 수 있습니다. 그리고 정규화된 데이터베이스는 중복을 피해 일관성을 유지할 수 있으며, 데이터의 중복을 줄여 저장공간을 절약하고 업데이트 시 중복된 데이터의 업데이트 감소시킬 수 있습니다. 반대로 정규화의 단점으로 데이터가 여러 테이블에 나뉘어 저장되므로 데이터를 검색하는데 조인 연산 증가하게 됩니다. 또한, 조인 연산 증가로 인해 성능저하가 발생할 수 있고, 복잡성 증가로 데이터베이스를 관리하는데 드는 시간(비용) 증가하게 됩니다.

- **제1 정규화(1NF)**

각 컬럼은 원자적인 값(Atomic Value)만을 가지며, 다중 값을 포함하지 않고 각 컬럼은 같은 타입의 값을 가져야 합니다. 즉 한칸에 하나의 데이터만 작성하도록 중복을 제거하는 작업입니다.

- **제2 정규화(2NF)**

1NF를 만족하면서 부분 함수 종속을 제거하는 단계입니다. 테이블의 모든 컬럼이 기본키에 대해 완전 함수 종속이여야 합니다.


- **제3 정규화(3NF)**

2NF를 만족하면서 이행 함수 종속을 제거하는 단계입니다. 속성에 종속적인 속성을 분리합니다.

- **BCNF(Boyce-codd Normal Form)**

3NF를 만족하면서 결정자 함수 종속을 제거하는 단계입니다. 결정자 후보 키가 아닌 함수 종속을 제거합니다.

- **제4 정규화(4NF)**

3NF를 만족하면서 다치 종속성을 제거하는 단계입니다. 특정 속성값에 따라 선택적인 속성을 분리합니다.

- **제5 정규화(5NF)**

4NF를 만족하면서 후보키를 통하지 않는 조인종속을 제거하는 단계입니다. 어떤 릴레이션의 R의 모든 조인 종속성의 만족이 R의 후보키를 통해서만 만족됩니다.

### 03.4.4 데이터베이스 설계하기

데이터 설계 단계로 요구조건 분석, 개념적 설계, 논리적 설계, 물리적 설계가 있습니다.  

첫번째 요구조건 분석 단계에서 도출된 요구사항 간 상충되는 부분을 해결하고 그 범위를 파악하여 테이터에 대한 요구를 분석하는 단계입니다. 요구사항을 어떻게 반영할지 정하는 단계로 방향을 결정하는 중요한 단계입니다.  
다음은 개념적 설계입니다. 사용자 요구에 대한 트랜잭션을 모델링하는 단계로, 비즈니스 요구사항에 기반하여 엔티티, 속성, 관계 등을 설계하는 과정이 포함됩니다.  

논리적 설계에서 트랜잭션의 인터페이스를 설계하는 단계입니다. 개념적 모델을 데이터베이스 시스템에 맞게 변환하는 단계입니다.  

마지막 물리적 설계 단계에서 논리 데이터 모델을 DBMS의 특성 및 성능을 고려하여 물리적인 스키마를 만드는 단계입니다. 테이블, 인덱스, 제약조건 등을 설계합니다. 여기서 응답시간, 저장 공간, 트랜잭션 처리를 고려하여 설계해야 합니다. 속도를 위해 일부 테이블에 중복을 허용하는 반정규화를 수행할 수 있습니다.  

여기서 트랜잭션이란 데이터베이스 시스템에서 하나의 논리적 기능을 수행하기 위한 작업의 기본 단위로 데이터의 원자성, 일관성, 고립성, 영속성이 지켜져야 합니다. 원자성은 한 작업단위의 연산 전체가 모두 정상적으로 실행되거나, 모두 취소되어야 한다는 성질로 모든 연산이 성공 또는 모두 취소되어야 합니다.  

DBMS에서 Commit / Rollback 기능을 지원합니다. 일관성은 시스템이 가지고 있는 조건이 일관되게 있어야 한다는 것입니다. DB에 제약조건이 어떤 트랜잭션이 발생해도 항상 일관되어야 한다는 특징입니다. 무결성 제약조건 및 병행제어 기능이 있습니다. 고립성은 동시에 실행되는 작업들이 서로 영향을 미치지 말아야 한다는 특징입니다.  

작업이 모두 반영되기 전까지 다른 트랜잭션이 현재 데이터에 대한 무결성을 해치지 않도록 잠금을 설정할 수 있습니다. 영속성은 성공한 트랜잭션은 DB에 반영되어야 한다는 특징입니다. 장애가 발생하더라도 회복기법을 통해 트랜잭션 도중 손상된 데이터베이스를 정상적인 상태로 복구해야 합니다.



- ERD 설계하기

다음은 개념적 설계의 결과물로 엔티티와, 관계, 속성을 시각적으로 표현한 ERD를 작성합니다. 데이터베이스 설계를 시각적으로 표현하는데 사용되는 도구로, 요구사항을 반영하여 효율적으로 작성해야 합니다. 어떤 데이터가 필요한지, 각 데이터의 속성은 무엇인지, 데이터 간의 관계는 어떻게 되는지 등을 파악합니다.  

요구사항을 바탕으로 데이터베이스에 저장될 엔티티를 식별합니다. 엔티티란 시스템 안에서 개별적으로 식별할 수 있는 사물이나 개념을 나타내는 것으로 ＂고객＂, ＂주문＂, ＂제품＂ 등이 있습니다. 다음으로 각 엔티티에 대해 속성을 식별합니다. 속성은 엔티티의 특징이나 테이터의 세부사항으로 ＂고객＂의 속성으로 ＂이름＂, ＂주소＂, ＂전화번호＂로 이어지게 됩니다. 그 후 엔티티 간 관계를 정의합니다.  

관계란 엔티티들이 서로 어떻게 연결되어 있는지를 나타내는 것으로 일대일(One-to-One), 일대다(One-to-Many), 다대다(Many-to-Many) 등의 형태로 나타낼 수 있습니다. ＂고객＂ 과 ＂이름＂, ＂주소＂, ＂전화번호＂는 일대다 관계로 이어지는 것이죠.필요에 따라 작성된 ERD를 검토하고 최적화를 진행하여 불필요한 중복을 줄이고 데이터베이스 구조를 더 효율적으로 만드는데 도움을 줍니다.

---

(출처 참고)  
https://blog.naver.com/naive_49/223296165717 (디비 설계의 중요성)  
https://blog.naver.com/siaxxx/223264520265 (개념적 설계 단계)  
https://blog.naver.com/siaxxx/223264525633 (ERD 작성)  
https://www.developerfastlane.com/blog/database-design-sequence-for-backend-developers (데이터베이스 설계 순서 및 방법)  
https://yeongunheo.tistory.com/entry/DB-%EC%84%A4%EA%B3%84%ED%95%98%EB%8A%94-%EB%B2%95-feat-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EB%AA%A8%EB%8D%B8%EB%A7%81 (테이블 설계 예시)  
https://velog.io/@sontulip/how-to-db-design (db 설계 상세 예시)  
https://velog.io/@woody_/Chapter-15.-ERD%EC%99%80-%EB%AA%A8%EB%8D%B8%EB%A7%81 (데이터 모델링 간단정리 - 이해 쉬움)  



---
# Archive
# ❗️이 아래 자료는 무시 ❗️
---

# 목차 고민중
# 03. 설계: "설계 계획 진행하는 법, 내가 알려줄게!"
!알아두기! (3~4줄 작성)
1. 설계 개요
-  설계 단계에서 진행되는 것

2. 시스템 아키텍쳐 설계
- 전체 구조 설계
- 하드웨어 및 소프트웨어 구성 요소 설계

3. 모듈 설계
- 기능적 모듈 설계
- 데이터 구조 설계
- 알고리즘 설계

4 인터페이스 설계
- 사용자 인터페이스 설계
- 와이어프레임과 프로토타입

5 데이터베이스 설계
- 데이터베이스 구조 설계 (저장 및 관리 방법 정의, 모델링?)
- 스키마 및 테이블 설계
- ERD

6 시스템 검증 계획 수립
- 테스트 계획 수립
- 검증 방법 정의
---
###  간단 버전
1. 기능정의서
2. 메인 프로토타입
3. 정보구조도 (IA)
4. 화면설계서 (스토리보드, UI/UX 설계서)
5. 진척관리 (WBS 기반 진척관리 병행 중요)
6. ERD
7. 테이블 몰록
8. 테이블 정의서
9. 프로그램 목록 (클래스 다이어그램, 컴포넌트 명세서, 클래스 정의서 등 포함 가능)
10. 개발표준 정의서 (변수명, brace, 클래스네임, 파일명, 규칙 등 코딩 관련 규칙)
11. 단테, 통테 시나리오

설계단계란?
- 분석 단계의 결과물을 토대로 구현 단계에 필요한 것들을 설계하는 단계
- 크게 데이터베이스 설계, 화면설계, 정보 설계 진행
- 공통 모듈과 단위 프로그램 기능을 정의함
- 테스트 시나리오를 이 때 병행하여 작성하기도 함

  설계단계 프로세스참고: https://blog.naver.com/agapeuni/221236321010

설계단계란?
분석 단계에서 정의된 요구사항 분석 결과를 기반으로 기능, 인터페이스, 데이터를 정의하여
구현단계에서 원활히 디자인, 퍼블, 개발이 시스템을 구축할 수 있는 작업을하는 단계다.
설계단계의 산출물은 문서형태로 나오게 되며, 이 문서에 따라 프로젝트의 결과물이 달라질 수 있다.

설계는 프로세스 설계, 인터페이스 설계, 데이터 설계로 나눌 수 있는데,
분석단계에서 미처 확인하지 못한 요구사항 등이 새롭게 추가되기도 한다.

도입단계에서 정의된 요구사항에 따라 우선 큰 그림을 그린다 (시스템 아키텍처를 설계해서)
인터페이스 설계를 한다.


데이터 설계란?
요구사항 분석, 개념 데이터 설계, 논리 데이터 설계, 물리 데이터 설계, 테이블 정의서 작성

출처:각 단계별 정의 + 데이터 설계< 프로세스 설계, 인터페이스 설계. 포르젝트 설계 개념 등 포함
https://multicore-it.com/57?category=686774



설계단계에서 가장 큰 임무
1. 정보설계 - 메뉴구조도, 기능정의서
2. 화면설계 - 스토리보드
3. DB 설계 - 테이블정의서 및 ERD
4. 테스트 설계 - 시나리오 작성
5. 프로그램 목록 정의 - 프로그램 명세서

3뎁스 메뉴가 1,500자 정도
