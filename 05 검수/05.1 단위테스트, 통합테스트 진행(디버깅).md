## 05.1 단기 테스트, 통합 테스트 진행(디버깅)

**❗알아두기**

```
- 단위 테스트(Unit Test): 사용자 요구사항에 대한 단위 모듈, 서브루틴 등을 테스트하는 단계 입니다. 코드의 각 부분이 예상대로 동작하는지 검증하고, 개별 단위가 다른 부분과 잘 통합되는지 확인하여 소프트웨어의 각 부분이 정확히 동작할 수 있도록 합니다.

- 통합 테스트(Integration Test): 단위 테스트를 통과한 컴포넌트 간의 인터페이스를 테스트하는 단계 입니다. 시스템의 각 부분이 상호 작용하여 예상대로 통합되고 동작하는지 확인하여 전체 시스템의 품질을 보증합니다.
```

### 05.1.1 테스트 시나리오 작성 (테스트 케이스)

#### 테스트 시나리오란?

테스트 시나리오란 어플리케이션의 테스트되어야 할 기능 및 특징, 테스트가 필요한 상황등을 작성한 문서입니다. 테스트 수행 절차를 미리 정함으로써 설계 단계해서 요구사항이나, 흐름등의 항목을 구성하여 테스트하기 위해 작성합니다.

테스트 시나리오 작성 시 유의사항으로 항목별로 시나리오를 분리하여 작성해야 합니다. 하나의 테스트 시나리오에 모든 테스트를 작성한다면 모든 기능을 테스트하기 어렵습니다. 또한 설계 시 요구사항을 토대로 테스트 시나리오를 상세히 작성해야합니다.

#### 테스트 케이스

테스트 수행 절차를 작성한 문서가 테스트 시나리오라면 테스트 케이스는 각각의 적용사항들입니다. 요구사항을 만족하는지, 기능이 작동하는지 확인하는데 필요한 단계, 데이터, 전제조건, 결과값들이 포함되어 작성됩니다. 설계 단계에서 테스트 항목을 명확하게 정의함으로써 설계의 미흡한 점을 미리 발견하고 조치함으로서 나중에 발생할 수 있는 문제를 사전에 예방할 수 있습니다. 또한 TDD(Test-Driven Development)등의 방법을 통해 테스트를 먼저 작성하고 코드가 요구사항을 충족할 수 있도록 작성하면, 오류를 조기에 발견하여 수정할 수 있습니다. 테스트를 통해 검증된 코드를 작성한다면 추후 시스템의 유지보수에 필요한 인력, 시간, 비용을 감소시킬 수 있으며, 요구사항 변경에도 테스트를 통해 기존 코드의 안정성을 보장할 수 있습니다. 다만, 테스트케이스를 미리 작성하는 것은 초기에 많은 시간이 요구되므로 시스템의 규모나 일정등을 고려하여 효울적인 일정계획을 수립해야 합니다. 만약 시스템의 **규모가 작고**, 요구사항 변경 **가능성이 낮다면**, 다른 방안을 고려해야 합니다.

#### 테스트 케이스 작성하기

테스트 케이스 작성 시 몇가지 지켜야하는 규칙이 있습니다. 대표적인 예시는 다음과 같습니다.

-   독립성 확보: 각 테스트 케이스의 결과가 다른 테스트에 영향을 주지 않아야 합니다.
-   명확한 테스트명 사용: 알아보기 쉬운 테스트명을 사용하여 다른 개발자가 어떤 테스트를 수행하는기 쉽게 인지알 수 있어야 합니다.
-   테스트 범위 제한: 특정 모듈, 기능을 다른 부분에 의존하지 않고 최소한의 코드만 실행되어야 합니다.
-   가독성 및 유지보수성: 테스트 코드는 읽기 쉬워야 합니다. 주석을 달아 테스트의 목적을 추가적으로 알릴 수 있습니다.
-   지속적인 테스트: 테스트는 새로운 기능이 추가되거나 코드가 변경될 때 마다 함께 진행하여 요구사항을 충족할 수 있도록 합니다.

테스트 케이스의 구성요소에는 "**식별자**", "**테스트 항목**", "**테스트 단계**", "**입력 데이터**", "**예상 출력명세**", "**실제 결과**" 및 "**통과여부**" 등이 있습니다. 아래는 테스트 케이스를 작성하는 예시입니다.

<img src="https://cdn.discordapp.com/attachments/876148399102115910/1200527432449523753/image.png?ex=65c6814c&is=65b40c4c&hm=64a51a09d2b91f59220226751f9f014a0fa4fc5cbd52ae9f0a854e07813f84ad&">

> -   테스트1: 올바른 이메일과 비밀번호로 로그인을 시도한 경우
> -   테스트2: 유효하지 않은 비밀번호로 로그인을 시도한 경우

테이스 케이스를 작성 후 테스트 코드를 작성합니다. 아래는 Django를 예시로 사용자가 로그인 하는 경우 테스트 코드입니다.

```python
from django.test import TestCase
from django.contrib.auth import get_user_model

User = get_user_model()
email = "test123@test123.com"
password = "test123"
loginurl = "/accounts/login/"


class MyTests(TestCase):
    def setUp(self):
        print("----------유저 생성-----------")
        self.user = User.objects.create_user(
            email=email,
            password=password,
        )

    def test_login_user(self):
        print("----------로그인 테스트-----------")

        response = self.client.post(loginurl, {"email": email, "password": password})
        print(response.data.get("message"))
        self.assertEqual(response.status_code, 200)

    def test_invalid_login(self):
        print("----------유요하지 않은 로그인 테스트-----------")

        response = self.client.post(loginurl, {"email": email, "password": "tste123"})
        print(response.data.get("message"))
        self.assertEqual(response.status_code, 401)
```

이후 테스트를 실행하여 결과를 확인합니다. 테스트한 어플리케이션의 기능의 성공과 실패를 판단하는 조건에 따라 성공여부를 작성합니다. 테스트에 성공하면 다음 테스트를 진행합니다. 테스트의 목적에 따라 소스코드의 결함, 시스템 응답시간, 트래픽, 복잡도, 등을 확인하는 테스트를 작성하여 품질을 확보할 수 있습니다. 다만 테스트의 목적은 결함이 **존재함을 밝히는 활동**이므로 **결함이 없다는 것을 증명할 수 없습니다.** 시스템의 경로, 입력값은 무수히 많은 경우의 수가 존재함으로 완벽한 테스트를 어렵습니다. 요구사항에 따라 알맞는 성격의 테스트를 진행한다면 결함을 미리 예방하여 개발기간 단축, 비용절감의 효과를 얻는것에 목적을 두고있습니다.

### 05.1.2 테스트 전략

테스트 전략은 소프트웨어 개발 프로세스에서 품질을 보장하고 안정성을 유지하기 위한 핵심적인 계획입니다. 이를 수립함으로써 프로젝트의 특정 단계에서 어떤 종류의 테스트를 수행할지 결정하고, 각 테스트의 목적을 명확하게 이해할 수 있게 됩니다. 소프트웨어 테스트 종류와, 프로그램 실행 여부에 따른 분류, 그리고 테스트 기법에 따른 분류를 통해 여러가지 방법들을 알아봅시다.

**❗알아두기**

```
- 블랙박스 테스트: 요구사항 명세를 기반으로 시스템의 기능 및 동작 위주의 테스트를 진행합니다. 내부 구조나 작동 방식을 모르더라도 설계 명세 기반으로 이루어지기 때문에 진행이 가능합니다.


- 화이트박스 테스트: 각 응용 프로그램의 내부 구조와 동작을 검사하는 소프트웨어 테스트입니다. 프로그램 분석, 소스코드의 구조, 로직에 대한 지식을 바탕으로 내부를 직접 확인하며 진행하는 테스트입니다. 구조기반 테스트, 코드기반 테스트, 글래스 테스트라고 합니다.
```

#### 프로그램 실행 여부에 따른 분류

프로그램 실행 여부에 따라 정적 테스트와, 동적 테스트로 나눠집니다.

<img src="../image/testcase.png">

**정적 테스트**

-   프로그램을 실행하지 않은 상태로, 소스 코드의 논리성을 검증하는 테스트
-   워크스루, 인스펙션, 정적 코드검사 도구 등이 있습니다

**동적 테스트**

-   프로그램을 실행하여, 테스트를 수행하여 결함을 검출하는 테스트
-   화이트박스 테스트, 블랙박스 테스트, 경험기반 테스트 등

#### 테스트 기법에 따른 분류

테스트 기법에 따른 분류에는 블랙박스 테스트와 화이트 박스 테스트가 있습니다.

**블랙박스 테스트 테스트 유형**

<img src='../image/Equivalence Partitioning Testing.png'>
등가 분할 테스트(Equivalence Partitioning Testing): 입력 데이터와 출력값이 유사한 도메인별로 유효값/무효값으로 분류되어 분류된 값은 그룹 내 모든 값을 대표값으로 간주하여 테스트하는 기법입니다. 일반적으로 경계값 분석 테스트와 함께 사용됩니다.

<br><br>
<img src='../image/Boundary Value Analysis Testing.png'>
경계값 분석 테스트(Boundary Value Analysis Testing): 등가 분할 후 경곗값에서 오류발생 확률이 높아, 경곗값을 포함하여 테스트 케이스를 설계하는 기법입니다. 최소값 혹은 최대값의 극한한계는 테스트하는데 사용됩니다.

<br><br>

| Conditions | Case 1         | Case 2                            | Case 3                      | Case 4                                     | Case 5                            | Case 6                                       | Case 7                                     | Case 8                                                  |
| ---------- | -------------- | --------------------------------- | --------------------------- | ------------------------------------------ | --------------------------------- | -------------------------------------------- | ------------------------------------------ | ------------------------------------------------------- |
| Format     | .jpg           | .jpg                              | .jpg                        | .jpg                                       | Not .jpg                          | Not .jpg                                     | Not .jpg                                   | Not .jpg                                                |
| Size       | Less than 32kb | Less than 32kb                    | >= 32kb                     | >= 32kb                                    | Less than 32kb                    | Less than 32kb                               | >= 32kb                                    | >= 32kb                                                 |
| Resolution | 137\*177       | Not 137\*177                      | 137\*177                    | Not 137\*177                               | 137\*177                          | Not 137\*177                                 | 137\*177                                   | Not 137\*177                                            |
| Output     | Photo uploaded | Error message resolution mismatch | Error message size mismatch | Error message size and resolution mismatch | Error message for format mismatch | Error message format and resolution mismatch | Error message for format and size mismatch | Error message for format, size, and resolution mismatch |

<img src='../image/Decision Table testing.png'>

결정 테이블 테스트(Decision Table Testing): 요구사항의 논리조건, 상황을 테이블 형식으로 나열하여 논리적 관계를 표현해 테스트하는 기법

테스트 케이스:

1. 'jpg' 형식 이미지만 업로드 가능.
2. 파일 크기는 32KB 미만이여야 한다.
3. 해상도는 137\*177이어야 한다.

<br><br>

<img src='../image/Use Case Testing.png'>

유스케이스 테스트(Use Case Testing): 시스템이 실제 사용되는 방식에 프로세스 흐름에 따라 비즈니스 시나리오를 기반 테스트 케이스를 명세화하여 수행하는 테스트 기법입니다. 통합 테스트 단계에서 컴포넌트 상호작용간 발생하는 오류를 찾는데 사용됩니다.

<br><br>
원인 결과 그래프 테스트(Cause-Effect Graph Testing): 원인-결과 그래프를 활용하여 입력, 출력 조건간의 논리적 관계로 표현하여 효용성이 높은 테스트 케이스를 선정하여 테스트하는 기법

**화이트 박스 테스트 테스트 유형**

-   프로그램의 내부 동작을 다양한 측면에서 검증하는데 사용됩니다.

구문 커버리지(Statment Coverage): 프로그램 내의 모든 명령문을 최소한 한 번 실행하는 테스트 커버리지 유형으로, 조건의 결과에 상관없이 구문 실행을 평가합니다.

결정 커버리지(Decision Coverage): 각 분기의 결정 포인트 내 전체 조건식이 최소한 한 번은 참 또는 거짓으로 실행되는 테스트 커버리지입니다.

조건 커버리지(Condition Coverage): 각 분기의 결정 포인트 내의 개별 조건식이 최소한 한 번은 참 또는 거짓으로 실행되도록 하는 테스트 커버리지입니다.

조건-결정 커버리지(Condition/Decision Coverage): 전체 조건식과 각 개별 조건식이 최소한 한 번은 참 또는 거짓으로 실행되도록 하는 테스트 커버리지입니다.

변경 조건-결정 커버리지(Modified Condition/Decision Coverage): 개별 조건식이 다른 개별 조건식에 영향을 주지 않고 전체 조건식에 독립적으로 영향을 주도록 하는 테스트 커버리지입니다.

다중 조건 커버리지(Multiple Condition Coverage):결정 조건 내 모든 개별 조건식의 모든 가능한 조합을 100% 보장하는 테스트 커버리지입니다.

기본 경로 커버리지(Base Path Coverage): 수행 가능한 모든 경로를 테스트하는 기법으로, 사이클을 허용하는 기본 경로를 확인합니다.

제어 흐름 테스트(Control Flow Testing): 프로그램의 제어 구조를 그래프로 나타내어 내부 로직을 테스트하는 기법입니다.

데이터 흐름 테스트(Data Flow Testing): 제어 그래프에 데이터 사용 현황을 추가하여 테스트하는 기법입니다.

루프 테스트(Loop Testing): 프로그램의 반복 구조에 중점을 두고 테스트하는 기법입니다.

<!-- ## 05.2 사용자 피드백

### 들어가기

테스트 전 요구사항을 정의하고 테스트 항목을 작성하는데 있어 담당자간 의사소통은 필수입니다. 프로젝트의 요구사항에 따라 -->
